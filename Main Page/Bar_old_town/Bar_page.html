<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar</title>
    <link rel="stylesheet" href="Bar_page_style.css">
</head>
<body>
    <main class="page">
        <div class="navigationBar">

            <div class="left">
                <button class="menu" onclick="hideShowMenu()"><img class="menuImg" src="../burgerBar.png" alt="Menu" height="30rem"></button>
            </div>

            <div class="middle">
                <div class="searchBarContainer">
                    <input class="searchBar" type="text" placeholder="Search for...">
                    <button class="searchGlass"><img class="searchGlassImg" src="../search.png" alt="search glass" height="18px"></button>
                </div>
            </div>

            <div class="right">
                <button class="signUpButton" id="signUpButton" onclick="location.href='../../Login and Sign up/signup.html'">Sign up</button>
                <button class="loginButton" id="loginButton" onclick="location.href='../../Login and Sign up/login.html'">Log in</button>
                <button class="profile" id="profile" onclick="hideShowProfile()"><img class="profileImg" src="../profile.png"></button>
            </div>
        </div>


        <div class="off_screen_menu" id="menu_bar">
            <h2 style="font-size: medium;">
                <ul>
                    <li style="margin-bottom: 6rem;"><a href="../main.html">Main page</a></li>
                </ul>
            </h2>
            <h3 class="off_screen_menu_head">List of old towns</h3>
                <ul class="towns">
                    <li><a href="../Ulcinj_old_town/Ulcinj_page.html" runat="server">Ulcinj</a></li>
                    <li><a href="../Budva_old_town/Budva_page.html">Budva</a></li>
                    <li><a href="../Kotor_old_town/Kotor_page.html">Kotor</a></li>
                    <li><a href="../Herceg_Novi_old_town/Herceg_Novi_page.html">Herceg Novi</a></li>
                </ul>
        </div>
        
        <div class="profile_info" id="user_info">
            <h4 class="profile_title">Profile information</h4>

            <p class="emailInfoContainer">
                <div class="emailNameSpace">
                    <p style="margin-top: 0px; margin-right: 5px;">Email:</p>
                    <span id="profile_email">########</span>
                    <input type="checkbox" id="checkboxEmail" onclick="showEmail()">
                    <label for="checkboxEmail" class="fas" id="fas"></label>
                </div>
                <div class="emailChangeSpace">
                    <button class="changeEmail" style="margin-left: 1rem;" onclick="changeEmail()">Change?</button>
                </div>
            </p>

            <div class="changeEmailContainer">
                <input class="profile_info_mail" id="profile_info_mail" type="text" onkeyup="emailValidation()">
                <button id="changeEmailConfirm" onclick="confirmChangeEmail()">Submit</button>
                <p id="emailChangeErrorMsg"></p>
            </div>

        <!------------------------------------------------------------------------------------------------------------->

            <p class="passwordInfoContainer">
                <div class="passwordNameSpace">
                    <p style="margin-top: 0px; margin-right: 5px;">Password:</p>
                    <span id="profile_password">########</span>
                    <input type="checkbox" id="checkboxPassword" onclick="showPassword()">
                    <label for="checkboxPassword" class="fas" id="fas"></label>
                </div>
                <div class="passwordChangeSpace">
                    <button class="changePassword" style="margin-left: 1rem;" onclick="changePassword()">Change?</button>
                </div>
            </p>

            <div class="changePasswordContainer">
                <div>
                    <input class="profile_info_password" id="profile_info_password" type="text">
                    <button id="changePasswordConfirm" onclick="confirmChangePassword()">Submit</button>
                </div>
                <div style="margin-bottom: 20px;">
                    <p id="passwordChangeErrorMsg"></p>
                </div>
            </div>

            <button class="sign_out_button" id="sign_out_button" onclick="signOut()">Sign out</button>
        </div>

        <div class="head">
            <h1>Welcome to the Old Town of Bar</h1>
            <h2>Explore the Ancient Ruins, Stunning Landscapes, and Rich History of Bar's Old Town!</h2>

            <img src="stari-bar-fullwidth.png" alt="Failed to load image 'Ulcinj old town'" style="display: block; margin-left: auto; margin-right: auto; width: 50%; border: 5px solid rgb(0,0,0,0.5); border-radius: 40px; margin-bottom: 5rem; margin-top: 5rem; min-width: 20rem;">
        </div>

        <div class="aboutBody">
            <h1>About the Old Town of Bar</h1>
            <p>The Old Town of Bar (Stari Bar), located at the foot of Mount Rumija, is one of Montenegro's most fascinating historical sites. Known for its centuries-old ruins, ancient olive trees, and strategic location, this fortified town has a rich history influenced by the Romans, Byzantines, Venetians, and Ottomans. Though largely in ruins today, the Old Town of Bar remains a captivating destination, offering visitors a glimpse into Montenegro's storied past while being surrounded by dramatic natural beauty.</p>

            <h1>Top Attractions</h1>
            <ol>
                <li>Bar Fortress (Citadel of Bar)</li>
                <p>The massive walls and fortifications of Bar Fortress dominate the Old Town. Though damaged by an earthquake in 1979, the fortress remains an imposing symbol of the town's defensive history. Explore the ancient walls, winding paths, and panoramic views over the valley.</p>
                <ul>
                    <li><b>Best time to visit</b> Year-round</li>
                    <li><b>Activities</b>: Sightseeing, photography, walking tours</li>
                    <li><b>Location</b> Old Town of Bar</li>
                </ul>

                <li>Aqueduct of Bar</li>
                <p>Built by the Ottomans in the 16th century, the Bar Aqueduct is an impressive piece of engineering, designed to bring fresh water from Mount Rumija to the town. It's one of the most well-preserved aqueducts in the Balkans and a must-see landmark.</p>
                <ul>
                    <li><b>Best time to visit</b> Open year-round</li>
                    <li><b>Activities</b> Photography, walking tours</li>
                    <li><b>Location</b> Entrance to the Old Town of Bar</li>
                </ul>

                <li>Church of St. Nicholas</li>
                <p>This historic church, built during the 13th century, stands within the Old Town's ancient ruins. While partially destroyed, it remains a place of cultural significance and a fascinating stop for those exploring the town's religious history.</p>
                <ul>
                    <li><b>Location</b> Within the Old Town</li>
                </ul>
            </ol>
                <h1>Outdoor Adventures</h1>
                <p style="padding-left: 2rem;">The Old Town of Bar is not only a historical gem but also an excellent destination for nature lovers and outdoor enthusiasts. The town's proximity to Mount Rumija offers exciting opportunities for hiking and exploring the rugged terrain.</p>
                <ul style="padding-left: 4.6rem;">
                    <li><b>Hiking Mount Rumija:</b> Adventurers can hike Mount Rumija, offering stunning views of both the Adriatic coast and Lake Skadar. The trail starts near the Old Town and is popular among those looking for a scenic, moderate hike.</li>
                    <li><b>Exploring the Olive Groves:</b> Bar is home to one of the world's oldest olive trees, Stara Maslina, which is over 2,000 years old. Visit the nearby olive groves and learn about Bar's long history of olive cultivation.</li>
                </ul>
        </div>

        <footer class="footer">
            <div class="footerItem">
                <h2>Contact us!</h2>
                <h3 style="margin-bottom: 4rem;">We'd love to hear from you! Whether you have questions, suggestions, or just want to share your latest adventure with us, feel free to reach out.</h3>
                <h4>Here's how you can get in touch:</h4>
                <ul style="align-items:first baseline; margin-right: 2.8rem;" type="none">
                    <li>Email: [your-email@example.com]</li>
                    <li>Phone: +[Your Phone Number]</li>
                </ul>
            </div>

            <div class="footerItem">
                <h2>Our Supporting Municipalities</h2>
                <h3>We are honored to be sponsored by municipalities that share our vision of promoting adventure, tourism, and outdoor activities. Their support helps us showcase the natural beauty, culture, and unique experiences that each region has to offer.</h3>
                <h4>Meet Our Municipal Partners:</h4>
                    <ul style="line-height: 0.7; margin-right: 2.2rem;" type="none">
                        <li>Municipality of Ulcinj</li>
                        <li>Municipality of Bar</li>
                        <li>Municipality of Budva</li>
                        <li>Municipality of Kotor</li>
                        <li>Municipality of Herceg Novi</li>
                    </ul>
            </div>
        </footer>
    </main>

    <script>
        document.getElementById("checkboxEmail").checked = false;
        document.getElementById("checkboxPassword").checked = false;

        document.getElementById("profile_info_mail").value = "";
        document.getElementById("profile_info_password").value = "";

        if(localStorage.getItem("loggedIn") === "true"){
            document.getElementById("signUpButton").hidden = true;
            document.getElementById("loginButton").hidden = true;
            document.getElementById("profile").hidden = false;
        }else{
            document.getElementById("signUpButton").hidden = false;
            document.getElementById("loginButton").hidden = false;
            document.getElementById("profile").hidden = true;
        }

        // Change email and password
        var profile_info_mail = document.getElementById("profile_info_mail");
        var profile_info_password = document.getElementById("profile_info_password");
        var profile_info_mail_value = document.getElementById("profile_info_mail").value;
        var profile_info_password_value = document.getElementById("profile_info_password").value;
        var changeEmailConfirm = document.getElementById("changeEmailConfirm");
        var changePasswordConfirm = document.getElementById("changePasswordConfirm");
        var emailAddress = document.getElementById("profile_info_mail");
        var emailChangeErrorMsg = document.getElementById("emailChangeErrorMsg");
        var passwordChangeErrorMsg = document.getElementById("passwordChangeErrorMsg");

        function emailValidation(){
            if(!emailAddress.value.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){
                return false;
            }
                return true;
        }
        function validatePassword(profile_info_password_value){
            var passwordRe=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d\s]{8,}$/;
            return passwordRe.test(profile_info_password_value);
        }

        function changeEmail(){
            profile_info_mail.classList.add('show');
            changeEmailConfirm.classList.add('show');
        }
        function changePassword(){
            profile_info_password.classList.add('show');
            changePasswordConfirm.classList.add('show');
        }
        function confirmChangeEmail(){
            profile_info_mail_value = document.getElementById("profile_info_mail").value;
            if (profile_info_mail_value !== "" && emailValidation()) {
                localStorage.setItem("newEmail", profile_info_mail_value);
                location.reload();
            } else {
                emailChangeErrorMsg.textContent = "Invalid email adress";
                profile_info_mail.style.border = "rgba(140, 5, 0) solid 3px";
            }
        }
        function confirmChangePassword(){
            profile_info_password_value = document.getElementById("profile_info_password").value;
            if (profile_info_password_value !== "" && validatePassword(profile_info_password_value)) {
                localStorage.setItem("newPassword", profile_info_password_value);
                location.reload();
            } else {
                passwordChangeErrorMsg.textContent = "Password must include at least 8 characters, 1 upper case letter and 1 number";
                profile_info_password.style.border = "rgba(140, 5, 0) solid 3px";
            }
        }

        //show email and password
        var profile_email = document.getElementById("profile_email");
        var profile_password = document.getElementById("profile_password");
        var displayEmail = 0;
        var displayPassword = 0;
        function showEmail(){
            if(displayEmail === 0){
                profile_email.textContent = localStorage.getItem("newEmail");
                displayEmail = 1;
            }else{
                profile_email.textContent = "########";
                displayEmail = 0;
            }
        }
        function showPassword(){
            if(displayPassword === 0){
                profile_password.textContent = localStorage.getItem("newPassword");
                displayPassword = 1;
            }else{
                profile_password.textContent = "########";
                displayPassword = 0;
            }
        }

        //sign out
        function signOut(){
            localStorage.removeItem("loggedIn");
            window.location.href = "../../Login and Sign up/login.html"
        }

        //hiding and showing the menu and profile elements
        var showMenu = document.getElementById('menu_bar');
        var showProfile = document.getElementById('user_info');
        var displayMenu = 0;
        var displayProfile = 0;

        function hideShowMenu() {
            if (displayMenu === 0) {
                showMenu.classList.add('show');
                displayMenu = 1;
            } else {
                showMenu.classList.remove('show');
                displayMenu = 0;
            }
        }

        function hideShowProfile() {
            if (displayProfile === 0) {
                showProfile.classList.add('show');
                displayProfile = 1;
            } else {
                showProfile.classList.remove('show');
                displayProfile = 0;
            }
        }
    </script>
</body>
</html>